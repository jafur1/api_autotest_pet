## API Auto Test

Автоматические тесты для публичного REST API `https://jsonplaceholder.typicode.com` с использованием `pytest` и простого HTTP‑клиента на базе `requests`.  
Тесты покрывают основные CRUD‑операции (создание, чтение, обновление, удаление) для ресурсов **posts**, **albums** и **users**, а также проверяют корректность JSON‑схем ответов.

---

## Содержание

- **Описание проекта**
- **Стек технологий**
- **Структура проекта**
- **Установка**
- **Запуск тестов**
- **Полезные замечания**

---

## Описание проекта

Проект предназначен для демонстрации и отработки:

- **Работы с REST API** через собственный класс `ApiClient` (`src/api_client/api_client_main.py`).
- **Написания автотестов на `pytest`** для API:
  - получение списка и отдельных сущностей;
  - создание записей (`POST`);
  - полное обновление (`PUT`) и частичное обновление (`PATCH`);
  - удаление (`DELETE`);
  - проверка негативных сценариев (несуществующий пользователь и т.п.).
- **Проверки структуры ответов** через `jsonschema` (схемы лежат в `src/schemas`).

Цель — иметь небольшой, но показательный набор API‑тестов, который легко развернуть и запустить локально.

---

## Стек технологий

- **Python 3.10+**
- **pytest** — фреймворк для тестирования
- **requests** — HTTP‑клиент
- **jsonschema** / схемы JSON (через модуль `jsonschema` и собственные описания схем в `src/schemas`)

Зависимости описаны в `requirements.txt`.

---

## Структура проекта

- `src/api_client/api_client_main.py` — простой клиент `ApiClient` для работы с HTTP‑методами (`GET`, `POST`, `PUT`, `PATCH`, `DELETE`).
- `src/api_test/` — папка с тестами `pytest`:
  - `test_posts.py` — тесты для ресурса `/posts` и комментариев к постам;
  - `test_albums.py` — тесты для ресурса `/albums`;
  - `test_user.py` — тесты для ресурса `/users`;
  - `conftest.py`, `helpers.py` — фикстуры и вспомогательные функции (проверка статуса, парсинг JSON и т.п.).
- `src/schemas/` — JSON‑схемы (`albums_schema.py`, `post_schema.py`, `user_schema.py`).
- `requirements.txt` — список Python‑зависимостей.

---

## Установка

### 1. Клонирование репозитория

Откройте терминал/PowerShell и выполните:

```bash
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd api_auto_test
```

### 2. Создание и активация виртуального окружения (рекомендуется)

**Windows (PowerShell):**

```bash
python -m venv venv
.\venv\Scripts\Activate.ps1
```

**Windows (cmd.exe):**

```bash
python -m venv venv
venv\Scripts\activate.bat
```

> Вы можете использовать уже существующую папку `src/venv`, если она настроена, либо создать новое окружение по шагам выше.

### 3. Установка зависимостей

Из корневой директории проекта (`api_auto_test`) выполните:

```bash
pip install -r requirements.txt
```

При необходимости обновите `pip`:

```bash
python -m pip install --upgrade pip
```

---

## Запуск тестов

Находясь в корне проекта (`api_auto_test`) и в активированном виртуальном окружении, выполните:

```bash
pytest
```

или, чтобы явно указать директорию с тестами:

```bash
pytest src/api_test
```

По умолчанию тесты обращаются к публичному API `https://jsonplaceholder.typicode.com` (базовый URL задан в `ApiClient`).

---

## Полезные замечания

- **Изменение base URL**  
  При необходимости вы можете модифицировать базовый URL в классе `ApiClient` (`src/api_client/api_client_main.py`), чтобы направить тесты на другое окружение (например, локальный mock‑сервер).

- **Расширение тестов**  
  Для добавления новых API‑тестов создавайте новые файлы `test_*.py` в папке `src/api_test` и используйте уже готовый клиент `api_client`, вспомогательные функции из `helpers.py` и существующие схемы в `src/schemas`.

- **Отчёты pytest**  
  При желании можно подключить плагины, например `pytest-html`, чтобы формировать HTML‑отчёты по результатам прогона тестов.


